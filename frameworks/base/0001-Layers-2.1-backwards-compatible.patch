From 9fa00eb9134c182458e88e9d0b82f9a1c2e62b55 Mon Sep 17 00:00:00 2001
From: camcory <camcory1@gmail.com>
Date: Fri, 10 Apr 2015 10:50:37 -0400
Subject: [PATCH 1/5] Layers 2.1 (backwards compatible)

This is a rework of the initial layers type 2 commit

Changes naming conventions to coexist with CMTE/AOSP naming

Layers : Exposing hard coded resources for type 2 overlay access [1/6]
Author: bgill55
https://github.com/BitSyko/platform_frameworks_base/commit/3462b83ac54bf6e08825cfbcee58236f7cfbc81e

New colors files for state handling:
material_notification_text.xml
notification_mtrl_action_textcolor.xml
Thanks to Andrew Dodd's commit:
https://gerrit.omnirom.org/#/c/11868

Make colors backwards compatible with layers previous commits based on:
Author: Andrew Dodd
https://gerrit.omnirom.org/#/c/12695/

Themes: Allow notification shadows to be rounded
Author:Andy Mast
https://github.com/CyanogenMod/android_frameworks_base/commit/d1e400288b6233ae0c427a0f67483ec190c86247

Author: davekover
Expose hardcoded colors
https://github.com/CyanogenMod/android_frameworks_base/commit/cc9e3b8fcba95b911d1cda36f7770c410058aa8b

Author: davekover
SystemUI: Expose values for themes.
https://github.com/CyanogenMod/android_frameworks_base/commit/c82e258b79822deab92aaf6514f63d393f60b3ed

Author: Thyrus11
Themes: Making DocumentsUI fully themeable
https://github.com/CyanogenMod/android_frameworks_base/commit/f4f58cae5a493050ea287da05e945b5e831099bd

Author: Thyrus11
Themes: Make resolver list fully themeable
https://github.com/CyanogenMod/android_frameworks_base/commit/a4b7dc7ce6809e56c4fa02299b7149a9cfad2ec1
Signed-off-by: iceandfire <arhamjamal@gmail.com>

Conflicts:
	packages/SystemUI/res/layout/keyguard_bottom_area.xml
	packages/SystemUI/res/layout/volume_dialog.xml
	packages/SystemUI/res/layout/volume_panel.xml

Change-Id: Ia1c130dad437563ad068ec08303905ca74c2f3d4

Conflicts:
	packages/SystemUI/res/layout/keyguard_bottom_area.xml
	packages/SystemUI/res/layout/volume_dialog.xml
	packages/SystemUI/res/layout/volume_panel.xml
---
 core/res/res/color/material_notification_text.xml  |   21 +++++++
 .../color/notification_mtrl_action_textcolor.xml   |   21 +++++++
 .../res/layout/notification_material_action.xml    |    2 +-
 .../notification_material_action_tombstone.xml     |    2 +-
 .../notification_template_material_big_picture.xml |    2 +-
 .../res/layout/resolver_different_item_header.xml  |    2 +-
 core/res/res/layout/resolver_list.xml              |    6 +-
 core/res/res/layout/resolver_list_with_default.xml |    6 +-
 core/res/res/values/custom_colors.xml              |   46 +++++++++++++++
 core/res/res/values/layers_colors.xml              |   30 ++++++++++
 core/res/res/values/styles.xml                     |   14 ++---
 core/res/res/values/styles_material.xml            |    7 ++-
 core/res/res/values/themes_material.xml            |    2 +-
 packages/DocumentsUI/res/layout/activity.xml       |    2 +-
 packages/DocumentsUI/res/layout/item_doc_grid.xml  |    6 +-
 packages/DocumentsUI/res/values/custom_colors.xml  |   22 ++++++++
 packages/DocumentsUI/res/values/layers_colors.xml  |   21 +++++++
 .../SystemUI/res/color/qs_user_detail_name.xml     |    4 +-
 packages/SystemUI/res/drawable/heads_up_scrim.xml  |    6 +-
 .../res/drawable/volume_dialog_background.xml      |   24 ++++++++
 .../res/drawable/zen_mode_panel_background.xml     |   24 ++++++++
 .../SystemUI/res/layout/keyguard_bottom_area.xml   |    8 +--
 .../SystemUI/res/layout/keyguard_status_bar.xml    |    2 +-
 .../SystemUI/res/layout/recents_search_bar.xml     |    2 +-
 .../res/layout/status_bar_expanded_header.xml      |    4 +-
 .../res/layout/status_bar_no_notifications.xml     |    2 +-
 .../status_bar_notification_keyguard_overflow.xml  |    2 +-
 .../layout/status_bar_notification_speed_bump.xml  |    2 +-
 .../res/layout/status_bar_toggle_slider.xml        |    2 +-
 packages/SystemUI/res/layout/volume_dialog.xml     |    2 +-
 packages/SystemUI/res/layout/volume_panel.xml      |    2 +-
 packages/SystemUI/res/layout/zen_mode_panel.xml    |    2 +-
 packages/SystemUI/res/values/arrays.xml            |    2 +-
 packages/SystemUI/res/values/custom_colors.xml     |   59 ++++++++++++++++++++
 packages/SystemUI/res/values/custom_dimens.xml     |    8 +++
 packages/SystemUI/res/values/layers_colors.xml     |   44 +++++++++++++++
 packages/SystemUI/res/values/styles.xml            |   25 +++++----
 .../statusbar/ActivatableNotificationView.java     |    1 +
 .../android/systemui/statusbar/BaseStatusBar.java  |    3 +-
 .../systemui/statusbar/ExpandableOutlineView.java  |   10 +++-
 .../systemui/statusbar/policy/KeyButtonRipple.java |    5 +-
 41 files changed, 396 insertions(+), 61 deletions(-)
 create mode 100644 core/res/res/color/material_notification_text.xml
 create mode 100644 core/res/res/color/notification_mtrl_action_textcolor.xml
 create mode 100644 core/res/res/values/custom_colors.xml
 create mode 100644 core/res/res/values/layers_colors.xml
 create mode 100644 packages/DocumentsUI/res/values/custom_colors.xml
 create mode 100644 packages/DocumentsUI/res/values/layers_colors.xml
 create mode 100644 packages/SystemUI/res/drawable/volume_dialog_background.xml
 create mode 100644 packages/SystemUI/res/drawable/zen_mode_panel_background.xml
 create mode 100644 packages/SystemUI/res/values/custom_colors.xml
 create mode 100644 packages/SystemUI/res/values/layers_colors.xml

diff --git a/core/res/res/color/material_notification_text.xml b/core/res/res/color/material_notification_text.xml
new file mode 100644
index 0000000..e0343f7
--- /dev/null
+++ b/core/res/res/color/material_notification_text.xml
@@ -0,0 +1,21 @@
+<!-- Copyright (C) 2008 The Android Open Source Project	2
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+    <item android:state_enabled="false"
+          android:alpha="@dimen/disabled_alpha_material_light"
+          android:color="@color/material_notification_text_light"/>
+    <item android:color="@color/material_notification_text_light"/>
+</selector>  
diff --git a/core/res/res/color/notification_mtrl_action_textcolor.xml b/core/res/res/color/notification_mtrl_action_textcolor.xml
new file mode 100644
index 0000000..37ec8bf
--- /dev/null
+++ b/core/res/res/color/notification_mtrl_action_textcolor.xml
@@ -0,0 +1,21 @@
+<!-- Copyright (C) 2008 The Android Open Source Project	2
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+
+<selector xmlns:android="http://schemas.android.com/apk/res/android">
+    <item android:state_enabled="false"
+          android:alpha="@dimen/disabled_alpha_material_light"
+          android:color="@color/notification_mtrl_action_text_light"/>
+    <item android:color="@color/notification_mtrl_action_text_light"/>
+</selector>  
diff --git a/core/res/res/layout/notification_material_action.xml b/core/res/res/layout/notification_material_action.xml
index da8b2e7..0a4109a 100644
--- a/core/res/res/layout/notification_material_action.xml
+++ b/core/res/res/layout/notification_material_action.xml
@@ -25,7 +25,7 @@
     android:gravity="start|center_vertical"
     android:drawablePadding="8dp"
     android:paddingStart="8dp"
-    android:textColor="@color/secondary_text_material_light"
+    android:textColor="@color/notification_mtrl_action_textcolor"
     android:textSize="13sp"
     android:singleLine="true"
     android:ellipsize="end"
diff --git a/core/res/res/layout/notification_material_action_tombstone.xml b/core/res/res/layout/notification_material_action_tombstone.xml
index 976448b..1f83753 100644
--- a/core/res/res/layout/notification_material_action_tombstone.xml
+++ b/core/res/res/layout/notification_material_action_tombstone.xml
@@ -24,7 +24,7 @@
     android:gravity="start|center_vertical"
     android:drawablePadding="8dp"
     android:paddingStart="8dp"
-    android:textColor="#555555"
+    android:textColor="@color/notification_mtrl_action_tombstone_textcolor"
     android:textSize="@dimen/notification_text_size"
     android:singleLine="true"
     android:ellipsize="end"
diff --git a/core/res/res/layout/notification_template_material_big_picture.xml b/core/res/res/layout/notification_template_material_big_picture.xml
index 302e651..2fe0192 100644
--- a/core/res/res/layout/notification_template_material_big_picture.xml
+++ b/core/res/res/layout/notification_template_material_big_picture.xml
@@ -48,7 +48,7 @@
         android:layout_marginTop="208dp"
         android:paddingStart="@dimen/notification_large_icon_width"
         android:layout_gravity="bottom"
-        android:background="#CCEEEEEE"
+        android:background="@color/notification_mtrl_big_picture_bg"
         >
         <include
             layout="@layout/notification_material_action_list"
diff --git a/core/res/res/layout/resolver_different_item_header.xml b/core/res/res/layout/resolver_different_item_header.xml
index 5889136..201c8c6 100644
--- a/core/res/res/layout/resolver_different_item_header.xml
+++ b/core/res/res/layout/resolver_different_item_header.xml
@@ -29,6 +29,6 @@
     android:paddingEnd="16dp"
     android:paddingTop="8dp"
     android:paddingBottom="8dp"
-    android:background="@color/white"
+    android:background="@color/resolver_list_bg"
     android:elevation="8dp"
     />
diff --git a/core/res/res/layout/resolver_list.xml b/core/res/res/layout/resolver_list.xml
index 00c25e6..3e1b146 100644
--- a/core/res/res/layout/resolver_list.xml
+++ b/core/res/res/layout/resolver_list.xml
@@ -30,7 +30,7 @@
         android:layout_height="wrap_content"
         android:layout_alwaysShow="true"
         android:elevation="8dp"
-        android:background="@color/white" >
+        android:background="@color/resolver_list_bg" >
         <TextView android:id="@+id/title"
                   android:layout_width="0dp"
                   android:layout_height="wrap_content"
@@ -82,7 +82,7 @@
         android:id="@+id/resolver_list"
         android:clipToPadding="false"
         android:scrollbarStyle="outsideOverlay"
-        android:background="@color/white"
+        android:background="@color/resolver_list_bg"
         android:elevation="8dp"
         android:nestedScrollingEnabled="true"
         android:divider="@null" />
@@ -108,7 +108,7 @@
         android:orientation="horizontal"
         android:layoutDirection="locale"
         android:measureWithLargestChild="true"
-        android:background="@color/white"
+        android:background="@color/resolver_list_bg"
         android:paddingTop="8dp"
         android:paddingBottom="8dp"
         android:paddingStart="12dp"
diff --git a/core/res/res/layout/resolver_list_with_default.xml b/core/res/res/layout/resolver_list_with_default.xml
index 31361e5..7fd38aa 100644
--- a/core/res/res/layout/resolver_list_with_default.xml
+++ b/core/res/res/layout/resolver_list_with_default.xml
@@ -30,7 +30,7 @@
         android:layout_height="wrap_content"
         android:layout_alwaysShow="true"
         android:orientation="vertical"
-        android:background="@color/white"
+        android:background="@color/resolver_list_bg"
         android:elevation="8dp" >
 
         <LinearLayout
@@ -102,7 +102,7 @@
             android:paddingBottom="8dp"
             android:paddingStart="12dp"
             android:paddingEnd="12dp"
-            android:background="@color/white"
+            android:background="@color/resolver_list_bg"
             android:elevation="8dp">
             <Button android:id="@+id/button_once"
                     android:layout_width="wrap_content"
@@ -136,7 +136,7 @@
         android:id="@+id/resolver_list"
         android:clipToPadding="false"
         android:scrollbarStyle="outsideOverlay"
-        android:background="@color/white"
+        android:background="@color/resolver_list_bg"
         android:elevation="8dp"
         android:nestedScrollingEnabled="true"
         android:divider="@null"
diff --git a/core/res/res/values/custom_colors.xml b/core/res/res/values/custom_colors.xml
new file mode 100644
index 0000000..631ba8e
--- /dev/null
+++ b/core/res/res/values/custom_colors.xml
@@ -0,0 +1,46 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!-- Copyright (C) 2007 The Android Open Source Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+
+<resources>
+    <!-- Exposed resources for theming -->
+
+    <!-- Layouts -->
+    <color name="notification_mtrl_action_text_light">@color/exposed_notify_action_text</color>
+    <color name="notification_mtrl_action_tombstone_textcolor">
+        @color/exposed_Widget.Material.Light.Button_TS
+    </color>
+    <color name="notification_mtrl_big_picture_bg">@color/exposed_notification_big_pic_bg</color>
+    <color name="resolver_list_bg">@color/exposed_resolver_list_bg</color>
+
+    <!-- Styles -->
+    <color name="statusbar_eventcontent_text">@color/exposed_TextAppearance.StatusBar.EventContent</color>
+    <color name="statusbar_eventcontent_title_text">@color/exposed_primary_text_dark</color>
+    <color name="statusbar_eventcontent_info_text">@color/exposed_TextAppearance.StatusBar.EventContent</color>
+    <color name="statusbar_eventcontent_time_text">@color/exposed_TextAppearance.StatusBar.EventContent</color>
+    <color name="statusbar_eventcontent_emphasis_text">
+        @color/exposed_TextAppearance.StatusBar.EventContent.Emphasis
+    </color>
+    <color name="easycorrectsuggestion_text_underline">@color/exposed_TextAppearance.EasyCorrectSuggestion</color>
+    <color name="widget_button_transparent_text">@color/exposed_primary_text_dark</color>
+
+    <!-- Styles material -->
+    <color name="material_notification_text_light">@color/exposed_secondary_text_light</color>
+    <color name="material_notification_title_text">@color/exposed_primary_text_light</color>
+    <color name="material_notification_emphasis_text">#66000000</color>
+
+    <!-- Themes material -->
+    <color name="navigation_bar_color">@color/exposed_navigation_bar</color>
+</resources> 
diff --git a/core/res/res/values/layers_colors.xml b/core/res/res/values/layers_colors.xml
new file mode 100644
index 0000000..4ef1064
--- /dev/null
+++ b/core/res/res/values/layers_colors.xml
@@ -0,0 +1,30 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!-- Copyright (C) 2007 The Android Open Source Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+
+<resources>
+    <!-- Legacy exposed resources for theming -->
+    <color name="exposed_primary_text_light">#de000000</color>
+    <color name="exposed_secondary_text_light">#8a000000</color>
+    <color name="exposed_primary_text_dark">#ffffffff</color>
+    <color name="exposed_notification_big_pic_bg">#CCEEEEEE</color>
+    <color name="exposed_resolver_list_bg">@color/white</color>
+    <color name="exposed_notify_action_text">#8a000000</color>
+    <color name="exposed_navigation_bar">@color/black</color>
+    <color name="exposed_TextAppearance.StatusBar.EventContent">#999999</color>
+    <color name="exposed_TextAppearance.StatusBar.EventContent.Emphasis">#CCCCCC</color>
+    <color name="exposed_TextAppearance.EasyCorrectSuggestion">#88C8C8C8</color>
+    <color name="exposed_Widget.Material.Light.Button_TS">#555555</color>
+</resources> 
diff --git a/core/res/res/values/styles.xml b/core/res/res/values/styles.xml
index c520a46..ed597b1 100644
--- a/core/res/res/values/styles.xml
+++ b/core/res/res/values/styles.xml
@@ -257,11 +257,11 @@ please see styles_device_defaults.xml.
     </style>
     <!-- Notification content styles -->
     <style name="TextAppearance.StatusBar.EventContent">
-        <item name="textColor">#999999</item>
+        <item name="textColor">@color/statusbar_eventcontent_text</item>
         <item name="textSize">@dimen/notification_text_size</item>
     </style>
     <style name="TextAppearance.StatusBar.EventContent.Title">
-        <item name="textColor">#ffffff</item>
+        <item name="textColor">@color/statusbar_eventcontent_title_text</item>
         <item name="fontFamily">sans-serif-light</item>
         <item name="textSize">@dimen/notification_title_text_size</item>
         <item name="textStyle">bold</item>
@@ -271,14 +271,14 @@ please see styles_device_defaults.xml.
     </style>
     <style name="TextAppearance.StatusBar.EventContent.Info">
         <item name="textSize">@dimen/notification_subtext_size</item>
-        <item name="textColor">#999999</item>
+        <item name="textColor">@color/statusbar_eventcontent_info_text</item>
     </style>
     <style name="TextAppearance.StatusBar.EventContent.Time">
         <item name="textSize">@dimen/notification_subtext_size</item>
-        <item name="textColor">#999999</item>
+        <item name="textColor">@color/statusbar_eventcontent_time_text</item>
     </style>
     <style name="TextAppearance.StatusBar.EventContent.Emphasis">
-        <item name="textColor">#CCCCCC</item>
+        <item name="textColor">@color/statusbar_eventcontent_emphasis_text</item>
     </style>
 
     <style name="TextAppearance.Small.CalendarViewWeekDayView">
@@ -290,7 +290,7 @@ please see styles_device_defaults.xml.
     </style>
 
     <style name="TextAppearance.EasyCorrectSuggestion" parent="TextAppearance.Suggestion">
-        <item name="textUnderlineColor">#88C8C8C8</item>
+        <item name="textUnderlineColor">@color/easycorrectsuggestion_text_underline</item>
     </style>
 
     <style name="TextAppearance.MisspelledSuggestion" parent="TextAppearance.Suggestion">
@@ -350,7 +350,7 @@ please see styles_device_defaults.xml.
     <style name="Widget.Button.Transparent">
         <item name="background">@drawable/btn_default_transparent</item>
         <item name="textAppearance">?attr/textAppearanceSmall</item>
-        <item name="textColor">@color/white</item>
+        <item name="textColor">@color/widget_button_transparent_text</item>
     </style>
 
     <style name="Widget.CompoundButton">
diff --git a/core/res/res/values/styles_material.xml b/core/res/res/values/styles_material.xml
index 419beba..dd05ef8 100644
--- a/core/res/res/values/styles_material.xml
+++ b/core/res/res/values/styles_material.xml
@@ -417,12 +417,12 @@ please see styles_device_defaults.xml.
     </style>
 
     <style name="TextAppearance.Material.Notification">
-        <item name="textColor">@color/secondary_text_material_light</item>
+        <item name="textColor">@color/material_notification_text</item>
         <item name="textSize">@dimen/notification_text_size</item>
     </style>
 
     <style name="TextAppearance.Material.Notification.Title">
-        <item name="textColor">@color/primary_text_default_material_light</item>
+        <item name="textColor">@color/material_notification_title_text</item>
         <item name="textSize">@dimen/notification_title_text_size</item>
     </style>
 
@@ -436,10 +436,11 @@ please see styles_device_defaults.xml.
 
     <style name="TextAppearance.Material.Notification.Time">
         <item name="textSize">@dimen/notification_subtext_size</item>
+        <item name="textColor">@color/material_notification_text</item>
     </style>
 
     <style name="TextAppearance.Material.Notification.Emphasis">
-        <item name="textColor">#66000000</item>
+        <item name="textColor">@color/material_notification_emphasis_text</item>
     </style>
 
     <style name="Widget.Material.Notification.ProgressBar" parent="Widget.Material.Light.ProgressBar.Horizontal" />
diff --git a/core/res/res/values/themes_material.xml b/core/res/res/values/themes_material.xml
index 9690238..c1fb866 100644
--- a/core/res/res/values/themes_material.xml
+++ b/core/res/res/values/themes_material.xml
@@ -168,7 +168,7 @@ please see themes_device_defaults.xml.
         <item name="windowDrawsSystemBarBackgrounds">true</item>
         <item name="windowActionBarFullscreenDecorLayout">@layout/screen_toolbar</item>
         <item name="statusBarColor">?attr/colorPrimaryDark</item>
-        <item name="navigationBarColor">@color/black</item>
+        <item name="navigationBarColor">@color/navigation_bar_color</item>
         <item name="windowEnterTransition">@transition/fade</item>
         <item name="windowSharedElementEnterTransition">@transition/move</item>
         <item name="windowSharedElementExitTransition">@transition/move</item>
diff --git a/packages/DocumentsUI/res/layout/activity.xml b/packages/DocumentsUI/res/layout/activity.xml
index 120168e..6fec8b2 100644
--- a/packages/DocumentsUI/res/layout/activity.xml
+++ b/packages/DocumentsUI/res/layout/activity.xml
@@ -63,7 +63,7 @@
         android:layout_gravity="start"
         android:orientation="vertical"
         android:elevation="16dp"
-        android:background="@*android:color/white">
+        android:background="@color/drawer_background_color">
 
         <Toolbar
             android:id="@+id/roots_toolbar"
diff --git a/packages/DocumentsUI/res/layout/item_doc_grid.xml b/packages/DocumentsUI/res/layout/item_doc_grid.xml
index d62d050..90938ae 100644
--- a/packages/DocumentsUI/res/layout/item_doc_grid.xml
+++ b/packages/DocumentsUI/res/layout/item_doc_grid.xml
@@ -66,7 +66,7 @@
                     android:ellipsize="middle"
                     android:textAlignment="viewStart"
                     android:textAppearance="@android:style/TextAppearance.Material.Subhead"
-                    android:textColor="@*android:color/primary_text_default_material_dark" />
+                    android:textColor="@color/font_color_doc_grid" />
 
                 <ImageView
                     android:id="@android:id/icon1"
@@ -95,7 +95,7 @@
                     android:ellipsize="end"
                     android:textAlignment="viewStart"
                     android:textAppearance="@android:style/TextAppearance.Material.Caption"
-                    android:textColor="@*android:color/primary_text_default_material_dark" />
+                    android:textColor="@color/font_color_doc_grid" />
 
                 <TextView
                     android:id="@+id/size"
@@ -107,7 +107,7 @@
                     android:ellipsize="end"
                     android:textAlignment="viewStart"
                     android:textAppearance="@android:style/TextAppearance.Material.Caption"
-                    android:textColor="@*android:color/primary_text_default_material_dark" />
+                    android:textColor="@color/font_color_doc_grid" />
 
                 <ImageView
                     android:id="@android:id/icon2"
diff --git a/packages/DocumentsUI/res/values/custom_colors.xml b/packages/DocumentsUI/res/values/custom_colors.xml
new file mode 100644
index 0000000..4363f1f
--- /dev/null
+++ b/packages/DocumentsUI/res/values/custom_colors.xml
@@ -0,0 +1,22 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!-- Copyright (C) 2013 The Android Open Source Project
+     Copyright (C) 2015 The CyanogenMod Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+
+<resources>
+    <!-- adding new exposed theme components -->
+    <color name="drawer_background_color">@color/exposed_activity_background_color</color>
+    <color name="font_color_doc_grid">@color/exposed_font_color_doc_grid</color>
+</resources> 
diff --git a/packages/DocumentsUI/res/values/layers_colors.xml b/packages/DocumentsUI/res/values/layers_colors.xml
new file mode 100644
index 0000000..f9809b7
--- /dev/null
+++ b/packages/DocumentsUI/res/values/layers_colors.xml
@@ -0,0 +1,21 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!-- Copyright (C) 2013 The Android Open Source Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+
+<resources>
+    <!-- exposed colors in main activity and font color docGrid-->
+    <color name="exposed_activity_background_color">#ffffffff</color>
+    <color name="exposed_font_color_doc_grid">#ffffffff</color>
+</resources> 
diff --git a/packages/SystemUI/res/color/qs_user_detail_name.xml b/packages/SystemUI/res/color/qs_user_detail_name.xml
index 57f7e65..c31c0a0 100644
--- a/packages/SystemUI/res/color/qs_user_detail_name.xml
+++ b/packages/SystemUI/res/color/qs_user_detail_name.xml
@@ -18,5 +18,5 @@
 
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_activated="true" android:color="@color/current_user_border_color" />
-    <item android:color="#66ffffff" /> <!-- 40% white -->
-</selector>
\ No newline at end of file
+    <item android:color="@color/qs_user_detail_name_text" /> <!-- 40% white -->
+</selector>
diff --git a/packages/SystemUI/res/drawable/heads_up_scrim.xml b/packages/SystemUI/res/drawable/heads_up_scrim.xml
index 59000fc..df39803 100644
--- a/packages/SystemUI/res/drawable/heads_up_scrim.xml
+++ b/packages/SystemUI/res/drawable/heads_up_scrim.xml
@@ -20,6 +20,6 @@
     <gradient
             android:type="linear"
             android:angle="-90"
-            android:startColor="#55000000"
-            android:endColor="#00000000" />
-</shape>
\ No newline at end of file
+            android:startColor="@color/headsup_scrim_start"
+            android:endColor="@color/headsup_scrim_end" />
+</shape>
diff --git a/packages/SystemUI/res/drawable/volume_dialog_background.xml b/packages/SystemUI/res/drawable/volume_dialog_background.xml
new file mode 100644
index 0000000..91e645e
--- /dev/null
+++ b/packages/SystemUI/res/drawable/volume_dialog_background.xml
@@ -0,0 +1,24 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+ Copyright (C) 2015 The CyanogenMod Project
+
+ Licensed under the Apache License, Version 2.0 (the "License");
+ you may not use this file except in compliance with the License.
+ You may obtain a copy of the License at
+
+ http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+ -->
+<shape xmlns:android="http://schemas.android.com/apk/res/android">
+    <solid android:color="@color/system_primary_color" />
+    <corners
+        android:topLeftRadius="0dp"
+        android:topRightRadius="0dp"
+        android:bottomLeftRadius="@dimen/notification_material_rounded_rect_radius"
+        android:bottomRightRadius="@dimen/notification_material_rounded_rect_radius"/>
+</shape> 
diff --git a/packages/SystemUI/res/drawable/zen_mode_panel_background.xml b/packages/SystemUI/res/drawable/zen_mode_panel_background.xml
new file mode 100644
index 0000000..5630f2a
--- /dev/null
+++ b/packages/SystemUI/res/drawable/zen_mode_panel_background.xml
@@ -0,0 +1,24 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+ Copyright (C) 2015 The CyanogenMod Project
+
+ Licensed under the Apache License, Version 2.0 (the "License");
+ you may not use this file except in compliance with the License.
+ You may obtain a copy of the License at
+
+ http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+ -->
+<shape xmlns:android="http://schemas.android.com/apk/res/android">
+    <solid android:color="@color/system_secondary_color" />
+    <corners
+        android:topLeftRadius="0dp"
+        android:topRightRadius="0dp"
+        android:bottomLeftRadius="@dimen/zen_mode_panel_radius"
+        android:bottomRightRadius="@dimen/zen_mode_panel_radius"/>
+</shape> 
diff --git a/packages/SystemUI/res/layout/keyguard_bottom_area.xml b/packages/SystemUI/res/layout/keyguard_bottom_area.xml
index 4cf4f52d..bb7b686 100644
--- a/packages/SystemUI/res/layout/keyguard_bottom_area.xml
+++ b/packages/SystemUI/res/layout/keyguard_bottom_area.xml
@@ -31,7 +31,7 @@
         android:layout_gravity="bottom|center_horizontal"
         android:gravity="center_horizontal"
         android:textStyle="italic"
-        android:textColor="#ffffff"
+        android:textColor="@color/kg_indication_text"
         android:textAppearance="?android:attr/textAppearanceSmall" />
 
     <FrameLayout
@@ -45,7 +45,7 @@
         android:layout_height="@dimen/keyguard_affordance_height"
         android:layout_width="@dimen/keyguard_affordance_width"
         android:layout_gravity="bottom|end"
-        android:tint="#ffffffff"
+        android:tint="@color/kg_camera_button_tint"
         android:src="@drawable/ic_camera_alt_24dp"
         android:scaleType="center"
         android:contentDescription="@string/accessibility_camera_button" />
@@ -55,7 +55,7 @@
         android:layout_height="@dimen/keyguard_affordance_height"
         android:layout_width="@dimen/keyguard_affordance_width"
         android:layout_gravity="bottom|start"
-        android:tint="#ffffffff"
+        android:tint="@color/kg_phone_button_tint"
         android:src="@drawable/ic_phone_24dp"
         android:scaleType="center"
         android:contentDescription="@string/accessibility_phone_button" />
@@ -67,7 +67,7 @@
         android:layout_gravity="bottom|center_horizontal"
         android:src="@drawable/ic_lock_24dp"
         android:scaleType="center"
-        android:tint="#ffffffff"
+        android:tint="@color/kg_lock_icon_tint"
         android:contentDescription="@string/accessibility_unlock_button" />
 
 </com.android.systemui.statusbar.phone.KeyguardBottomAreaView>
diff --git a/packages/SystemUI/res/layout/keyguard_status_bar.xml b/packages/SystemUI/res/layout/keyguard_status_bar.xml
index ba6ed89..4c3d6f1 100644
--- a/packages/SystemUI/res/layout/keyguard_status_bar.xml
+++ b/packages/SystemUI/res/layout/keyguard_status_bar.xml
@@ -63,7 +63,7 @@
         android:gravity="center_vertical"
         android:ellipsize="marquee"
         android:textAppearance="?android:attr/textAppearanceSmall"
-        android:textColor="#ffffff"
+        android:textColor="@color/kg_carrier_text"
         android:singleLine="true" />
 
 </com.android.systemui.statusbar.phone.KeyguardStatusBarView>
diff --git a/packages/SystemUI/res/layout/recents_search_bar.xml b/packages/SystemUI/res/layout/recents_search_bar.xml
index 915283e..cdec4d6 100644
--- a/packages/SystemUI/res/layout/recents_search_bar.xml
+++ b/packages/SystemUI/res/layout/recents_search_bar.xml
@@ -23,7 +23,7 @@
         android:layout_height="wrap_content"
         android:layout_gravity="center"
         android:text="@string/recents_search_bar_label"
-        android:textColor="#99ffffff"
+        android:textColor="@color/recents_search_bar_label_text"
         android:textSize="18sp"
         android:textAllCaps="true" />
 </FrameLayout>
diff --git a/packages/SystemUI/res/layout/status_bar_expanded_header.xml b/packages/SystemUI/res/layout/status_bar_expanded_header.xml
index a3887cb..c5c242a 100644
--- a/packages/SystemUI/res/layout/status_bar_expanded_header.xml
+++ b/packages/SystemUI/res/layout/status_bar_expanded_header.xml
@@ -26,7 +26,7 @@
     android:paddingStart="@dimen/notification_side_padding"
     android:paddingEnd="@dimen/notification_side_padding"
     android:baselineAligned="false"
-    android:elevation="4dp"
+    android:elevation="@dimen/status_bar_expanded_header_elevation"
     android:background="@drawable/notification_header_bg"
     android:clickable="true"
     android:focusable="true"
@@ -135,7 +135,7 @@
         android:layout_marginBottom="4dp"
         android:drawablePadding="6dp"
         android:drawableStart="@drawable/ic_access_alarms_small"
-        android:textColor="#64ffffff"
+        android:textColor="@color/alarm_status_text"
         android:textAppearance="@style/TextAppearance.StatusBar.Expanded.Date"
         android:paddingEnd="6dp"
         android:paddingStart="6dp"
diff --git a/packages/SystemUI/res/layout/status_bar_no_notifications.xml b/packages/SystemUI/res/layout/status_bar_no_notifications.xml
index dd501d4..0e52a33 100644
--- a/packages/SystemUI/res/layout/status_bar_no_notifications.xml
+++ b/packages/SystemUI/res/layout/status_bar_no_notifications.xml
@@ -27,7 +27,7 @@
             android:layout_height="64dp"
             android:paddingTop="12dp"
             android:gravity="top|center_horizontal"
-            android:textColor="#ffffff"
+            android:textColor="@color/no_notifications_text"
             android:textSize="20sp"
             android:text="@string/empty_shade_text"/>
 </com.android.systemui.statusbar.EmptyShadeView>
diff --git a/packages/SystemUI/res/layout/status_bar_notification_keyguard_overflow.xml b/packages/SystemUI/res/layout/status_bar_notification_keyguard_overflow.xml
index 4526af5..39773ce 100644
--- a/packages/SystemUI/res/layout/status_bar_notification_keyguard_overflow.xml
+++ b/packages/SystemUI/res/layout/status_bar_notification_keyguard_overflow.xml
@@ -44,7 +44,7 @@
             android:layout_gravity="center_vertical"
             android:background="@drawable/keyguard_overflow_number_background"
             android:gravity="center"
-            android:textColor="#ff686868"
+            android:textColor="@color/more_text"
             android:textStyle="bold"
             android:textSize="14dp"
             />
diff --git a/packages/SystemUI/res/layout/status_bar_notification_speed_bump.xml b/packages/SystemUI/res/layout/status_bar_notification_speed_bump.xml
index e220a16..1cde64b 100644
--- a/packages/SystemUI/res/layout/status_bar_notification_speed_bump.xml
+++ b/packages/SystemUI/res/layout/status_bar_notification_speed_bump.xml
@@ -25,6 +25,6 @@
         android:id="@+id/speedbump_line"
         android:layout_width="match_parent"
         android:layout_height="1dp"
-        android:background="#6fdddddd"
+        android:background="@color/speedbump_line_bg"
         android:layout_gravity="center_vertical"/>
 </com.android.systemui.statusbar.SpeedBumpView>
diff --git a/packages/SystemUI/res/layout/status_bar_toggle_slider.xml b/packages/SystemUI/res/layout/status_bar_toggle_slider.xml
index a5bf68e..2c37e6b 100644
--- a/packages/SystemUI/res/layout/status_bar_toggle_slider.xml
+++ b/packages/SystemUI/res/layout/status_bar_toggle_slider.xml
@@ -56,7 +56,7 @@
         android:layout_centerVertical="true"
         android:gravity="center"
         android:paddingTop="26dp"
-        android:textColor="#666666"
+        android:textColor="@color/toggle_text"
         android:textSize="12sp"
         android:visibility="gone"
         />
diff --git a/packages/SystemUI/res/layout/volume_dialog.xml b/packages/SystemUI/res/layout/volume_dialog.xml
index 3765fe8..c313d27 100644
--- a/packages/SystemUI/res/layout/volume_dialog.xml
+++ b/packages/SystemUI/res/layout/volume_dialog.xml
@@ -19,7 +19,7 @@
     android:layout_height="wrap_content"
     android:layout_marginLeft="@dimen/notification_side_padding"
     android:layout_marginRight="@dimen/notification_side_padding"
-    android:background="@drawable/qs_background_primary"
+    android:background="@drawable/volume_dialog_background"
     android:translationZ="@dimen/volume_panel_z"
     android:layout_marginBottom="@dimen/volume_panel_z">
 
diff --git a/packages/SystemUI/res/layout/volume_panel.xml b/packages/SystemUI/res/layout/volume_panel.xml
index 56fdcfe..87e45df 100644
--- a/packages/SystemUI/res/layout/volume_panel.xml
+++ b/packages/SystemUI/res/layout/volume_panel.xml
@@ -25,7 +25,7 @@
         android:layout_height="wrap_content"
         android:layout_width="match_parent"
         android:orientation="horizontal"
-        android:background="@color/system_secondary_color"
+        android:background="@color/volume_panel_background_color"
         android:paddingTop="8dp"
         android:paddingBottom="8dp"
         android:gravity="top" >
diff --git a/packages/SystemUI/res/layout/zen_mode_panel.xml b/packages/SystemUI/res/layout/zen_mode_panel.xml
index 3d17820..5026c9c 100644
--- a/packages/SystemUI/res/layout/zen_mode_panel.xml
+++ b/packages/SystemUI/res/layout/zen_mode_panel.xml
@@ -28,7 +28,7 @@
         android:layout_height="wrap_content"
         android:minHeight="8dp"
         android:elevation="4dp"
-        android:background="@drawable/qs_background_secondary" >
+        android:background="@drawable/zen_mode_panel_background" >
 
         <com.android.systemui.volume.SegmentedButtons
             android:id="@+id/zen_buttons"
diff --git a/packages/SystemUI/res/values/arrays.xml b/packages/SystemUI/res/values/arrays.xml
index 6102aa6..79a4649 100644
--- a/packages/SystemUI/res/values/arrays.xml
+++ b/packages/SystemUI/res/values/arrays.xml
@@ -26,7 +26,7 @@
     </array>
     <array name="batterymeter_color_values">
         <item>@*android:color/battery_saver_mode_color</item>
-        <item>#FFFFFFFF</item>
+        <item>@color/batterymeter_base_color</item>
     </array>
     <array name="batterymeter_bolt_points">
         <item>73</item> <item>0</item>
diff --git a/packages/SystemUI/res/values/custom_colors.xml b/packages/SystemUI/res/values/custom_colors.xml
new file mode 100644
index 0000000..f767421
--- /dev/null
+++ b/packages/SystemUI/res/values/custom_colors.xml
@@ -0,0 +1,59 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+/*
+ * Copyright 2010, The Android Open Source Project
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+-->
+<resources>
+    <!-- Exposed resources for theming -->
+    <color name="qs_user_detail_name_text">@color/exposed_qs_user_detail_name</color>
+    <color name="headsup_scrim_start">@color/exposed_headsup_scrim_start</color>
+    <color name="headsup_scrim_end">@color/exposed_headsup_scrim_end</color>
+    <color name="kg_indication_text">@color/exposed_kg_indication_text</color>
+    <color name="kg_camera_button_tint">@color/exposed_kg_camera_button</color>
+    <color name="kg_phone_button_tint">@color/exposed_kg_phone_button</color>
+    <color name="kg_lock_icon_tint">@color/exposed_kg_lock_icon</color>
+    <color name="kg_battery_level_text">@color/exposed_kg_batt_level</color>
+    <color name="kg_carrier_text">@color/exposed_kg_carrier_text</color>
+    <color name="recents_search_bar_label_text">@color/exposed_recents_search_bar_label</color>
+    <color name="alarm_status_text">@color/exposed_button</color>
+    <color name="battery_level_text">@color/exposed_batt_text</color>
+    <color name="no_notifications_text">@color/exposed_no_notify</color>
+    <color name="more_text">@color/exposed_more_text</color>
+    <color name="speedbump_line_bg">@color/exposed_speedbump_line</color>
+    <color name="toggle_text">@color/exposed_toggle</color>
+    <color name="recents_theme_no_wallpaper_bg">@color/exposed_bg_light</color>
+    <color name="statusbar_headsup_text">@color/exposed_primary_text_light</color>
+    <color name="statusbar_system_panel_text">@color/exposed_system_panel_text_light</color>
+    <color name="statusbar_text_button_text">@color/exposed_TextAppearance.StatusBar.TextButton</color>
+    <color name="statusbar_expanded_text">@color/exposed_primary_text_light</color>
+    <color name="statusbar_expanded_clock_text">@color/exposed_primary_text_dark</color>
+    <color name="statusbar_expanded_date_text">@color/exposed_secondary_text_dark</color>
+    <color name="statusbar_expanded_above_date_time_text">@color/exposed_button</color>
+    <color name="statusbar_expanded_network_text">@color/exposed_TextAppearance_Network</color>
+    <color name="statusbar_expanded_network_emergency_only_text">@color/exposed_primary_text_dark</color>
+    <color name="system_dialog_text">@color/exposed_primary_text_dark</color>
+    <color name="material_notification_parenthetical_text">
+        @color/exposed_TextAppearance.Material.Notification.Parenthetical
+    </color>
+    <!-- Background of the volume panel. See also: volume_dialog_background -->
+    <color name="volume_panel_background_color">@color/system_secondary_color</color>
+    <!-- Battery base color -->
+    <color name="batterymeter_base_color">#FFFFFFFF</color>
+    <!-- Color for notification icons -->
+    <color name="notification_icon_color">#FFFFFFFF</color>
+    <!-- Navigation button ripple color -->
+    <color name="navbutton_ripple_color">#FFFFFFFF</color>
+</resources>
diff --git a/packages/SystemUI/res/values/custom_dimens.xml b/packages/SystemUI/res/values/custom_dimens.xml
index 33f9e8c..82ef11e 100644
--- a/packages/SystemUI/res/values/custom_dimens.xml
+++ b/packages/SystemUI/res/values/custom_dimens.xml
@@ -22,4 +22,12 @@
     <dimen name="floating_action_button_translation_z">12dp</dimen>
     <dimen name="floating_action_button_margin_side">18dp</dimen>
     <dimen name="floating_action_button_margin_bottom">64dp</dimen>
+
+    <!-- Themes: radius of the corners of the notification dropshadow
+         See also: notification_material_rounded_rect_radius 
+    -->
+    <dimen name="notification_material_shadow_rounded_rect_radius">0dp</dimen>
+    <dimen name="zen_mode_panel_radius">@dimen/notification_material_rounded_rect_radius</dimen>
+    <dimen name="status_bar_expanded_header_elevation">4dp</dimen>
+
 </resources>
diff --git a/packages/SystemUI/res/values/layers_colors.xml b/packages/SystemUI/res/values/layers_colors.xml
new file mode 100644
index 0000000..b74cf59
--- /dev/null
+++ b/packages/SystemUI/res/values/layers_colors.xml
@@ -0,0 +1,44 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!-- Copyright (C) 2007 The Android Open Source Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+
+<resources>
+    <!-- Exposed resources for theming -->
+    <color name="exposed_bg_light">@android:color/black</color>
+    <color name="exposed_primary_text_light">#de000000</color>
+    <color name="exposed_secondary_text_light">#8a000000</color>
+    <color name="exposed_TextAppearance.Material.Notification.Parenthetical">#60000000</color>
+    <color name="exposed_system_panel_text_light">#FF808080</color>
+    <color name="exposed_TextAppearance.StatusBar.TextButton">#FFFFFFFF</color>
+    <color name="exposed_primary_text_dark">#ffffff</color>
+    <color name="exposed_secondary_text_dark">#b2ffffff</color>
+    <color name="exposed_button">#64ffffff</color>
+    <color name="exposed_TextAppearance_Network">#999999</color>
+    <color name="exposed_batt_text">#ffffff</color>
+    <color name="exposed_kg_indication_text">#ffffff</color>
+    <color name="exposed_kg_camera_button">#ffffffff</color>
+    <color name="exposed_kg_phone_button">#ffffffff</color>
+    <color name="exposed_kg_lock_icon">#ffffffff</color>
+    <color name="exposed_kg_batt_level">#ffffff</color>
+    <color name="exposed_kg_carrier_text">#ffffff</color>
+    <color name="exposed_recents_search_bar_label">#99ffffff</color>
+    <color name="exposed_no_notify">#ffffff</color>
+    <color name="exposed_more_text">#ff686868</color>
+    <color name="exposed_speedbump_line">#6fdddddd</color>
+    <color name="exposed_toggle">#666666</color>
+    <color name="exposed_qs_user_detail_name">#66ffffff</color>
+    <color name="exposed_headsup_scrim_start">#55000000</color>
+    <color name="exposed_headsup_scrim_end">#00000000</color>
+</resources> 
diff --git a/packages/SystemUI/res/values/styles.xml b/packages/SystemUI/res/values/styles.xml
index 05c7493..e75f760 100644
--- a/packages/SystemUI/res/values/styles.xml
+++ b/packages/SystemUI/res/values/styles.xml
@@ -42,7 +42,7 @@
 
     <!-- Performance optimized alternate Recents theme (no wallpaper) -->
     <style name="RecentsTheme.NoWallpaper">
-        <item name="android:windowBackground">@android:color/black</item>
+        <item name="android:windowBackground">@color/recents_theme_no_wallpaper_bg</item>
     </style>
 
     <!-- Animations for a non-full-screen window or activity. -->
@@ -61,20 +61,21 @@
 
     <style name="TextAppearance.StatusBar.HeadsUp"
         parent="@*android:style/TextAppearance.StatusBar">
+        <item name="android:textColor">@color/statusbar_headsup_text</item>
     </style>
 
     <style name="TextAppearance.StatusBar.SystemPanel"
         parent="@*android:style/TextAppearance.StatusBar">
         <item name="android:textAppearance">?android:attr/textAppearance</item>
         <item name="android:textStyle">normal</item>
-        <item name="android:textColor">#FF808080</item>
+        <item name="android:textColor">@color/statusbar_system_panel_text</item>
     </style>
 
     <style name="TextAppearance.StatusBar.TextButton"
         parent="@*android:style/TextAppearance.StatusBar">
         <item name="android:textAppearance">?android:attr/textAppearance</item>
         <item name="android:textStyle">normal</item>
-        <item name="android:textColor">#FFFFFFFF</item>
+        <item name="android:textColor">@color/statusbar_text_button_text</item>
     </style>
 
     <style name="TextAppearance.StatusBar.Clock" parent="@*android:style/TextAppearance.StatusBar.Icon">
@@ -83,24 +84,26 @@
         <item name="android:textColor">@color/status_bar_clock_color</item>
     </style>
 
-    <style name="TextAppearance.StatusBar.Expanded" parent="@*android:style/TextAppearance.StatusBar" />
+    <style name="TextAppearance.StatusBar.Expanded" parent="@*android:style/TextAppearance.StatusBar">
+        <item name="android:textColor">@color/statusbar_expanded_text</item>
+    </style>
 
     <style name="TextAppearance.StatusBar.Expanded.Clock">
         <item name="android:textSize">@dimen/qs_time_expanded_size</item>
         <item name="android:fontFamily">sans-serif-medium</item>
-        <item name="android:textColor">#ffffff</item>
+        <item name="android:textColor">@color/statusbar_expanded_clock_text</item>
     </style>
 
     <style name="TextAppearance.StatusBar.Expanded.Date">
         <item name="android:textSize">@dimen/qs_date_collapsed_size</item>
         <item name="android:textStyle">normal</item>
-        <item name="android:textColor">#b2ffffff</item>
+        <item name="android:textColor">@color/statusbar_expanded_date_text</item>
     </style>
 
     <style name="TextAppearance.StatusBar.Expanded.AboveDateTime">
         <item name="android:textSize">@dimen/qs_emergency_calls_only_text_size</item>
         <item name="android:textStyle">normal</item>
-        <item name="android:textColor">#66ffffff</item>
+        <item name="android:textColor">@color/statusbar_expanded_above_date_time_text</item>
     </style>
 
     <style name="TextAppearance.StatusBar.Expanded.EmergencyCallsOnly"
@@ -110,10 +113,11 @@
             parent="TextAppearance.StatusBar.Expanded.AboveDateTime" />
 
     <style name="TextAppearance.StatusBar.Expanded.Network" parent="@style/TextAppearance.StatusBar.Expanded.Date">
-        <item name="android:textColor">#999999</item>
-	</style>
+        <item name="android:textColor">@color/statusbar_expanded_network_text</item>
+    </style>
 
     <style name="TextAppearance.StatusBar.Expanded.Network.EmergencyOnly">
+        <item name="android:textColor">@color/statusbar_expanded_network_emergency_only_text</item>
     </style>
 
     <style name="TextAppearance.StatusBar.Expanded.UserSwitcher">
@@ -226,6 +230,7 @@
     <style name="Theme.SystemUI.Dialog" parent="@android:style/Theme.DeviceDefault.Light.Dialog">
         <item name="android:colorPrimary">@color/system_primary_color</item>
         <item name="android:colorControlActivated">@color/system_accent_color</item>
+        <item name="android:textColor">@color/system_dialog_text</item>
     </style>
 
     <style name="Theme.SystemUI.Dialog.Alert" parent="@*android:style/Theme.DeviceDefault.Light.Dialog.Alert" />
@@ -245,7 +250,7 @@
     <style name="TextAppearance.Material.Notification.Parenthetical"
            parent="@*android:style/TextAppearance.Material.Notification">
         <item name="android:textStyle">italic</item>
-        <item name="android:textColor">#60000000</item>
+        <item name="android:textColor">@color/material_notification_parenthetical_text</item>
     </style>
 
     <style name="SearchPanelCircle">
diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/ActivatableNotificationView.java b/packages/SystemUI/src/com/android/systemui/statusbar/ActivatableNotificationView.java
index 465a141..780062f 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/ActivatableNotificationView.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/ActivatableNotificationView.java
@@ -154,6 +154,7 @@ public abstract class ActivatableNotificationView extends ExpandableOutlineView
         mAppearAnimationFilter = new PorterDuffColorFilter(0, PorterDuff.Mode.SRC_ATOP);
         mRoundedRectCornerRadius = getResources().getDimensionPixelSize(
                 R.dimen.notification_material_rounded_rect_radius);
+        setRoundCornerRadius(mRoundedRectCornerRadius); // Themes: For drop-shadow rounded corners
         mLegacyColor = getResources().getColor(R.color.notification_legacy_background_color);
         mNormalColor = getResources().getColor(R.color.notification_material_background_color);
         mLowPriorityColor = getResources().getColor(
diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/BaseStatusBar.java b/packages/SystemUI/src/com/android/systemui/statusbar/BaseStatusBar.java
index 8a03a2b..14dff4e 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/BaseStatusBar.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/BaseStatusBar.java
@@ -778,7 +778,8 @@ public abstract class BaseStatusBar extends SystemUI implements
 
         if (entry.icon != null) {
             if (entry.targetSdk >= Build.VERSION_CODES.LOLLIPOP) {
-                entry.icon.setColorFilter(mContext.getResources().getColor(android.R.color.white));
+                entry.icon.setColorFilter(mContext.getResources().getColor(
+                    R.color.notification_icon_color));
             } else {
                 entry.icon.setColorFilter(null);
             }
diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/ExpandableOutlineView.java b/packages/SystemUI/src/com/android/systemui/statusbar/ExpandableOutlineView.java
index a18fff2..d883a53 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/ExpandableOutlineView.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/ExpandableOutlineView.java
@@ -31,6 +31,7 @@ public abstract class ExpandableOutlineView extends ExpandableView {
 
     private final Rect mOutlineRect = new Rect();
     private boolean mCustomOutline;
+    private float mRoundCornerRadius = 0;
 
     public ExpandableOutlineView(Context context, AttributeSet attrs) {
         super(context, attrs);
@@ -38,12 +39,12 @@ public abstract class ExpandableOutlineView extends ExpandableView {
             @Override
             public void getOutline(View view, Outline outline) {
                 if (!mCustomOutline) {
-                    outline.setRect(0,
+                    outline.setRoundRect(0,
                             mClipTopAmount,
                             getWidth(),
-                            Math.max(getActualHeight(), mClipTopAmount));
+                            Math.max(getActualHeight(), mClipTopAmount), mRoundCornerRadius);
                 } else {
-                    outline.setRect(mOutlineRect);
+                    outline.setRoundRect(mOutlineRect, mRoundCornerRadius);
                 }
             }
         });
@@ -82,4 +83,7 @@ public abstract class ExpandableOutlineView extends ExpandableView {
         invalidateOutline();
     }
 
+    protected void setRoundCornerRadius(float roundRadius) {
+        mRoundCornerRadius = roundRadius;
+    }
 }
diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/policy/KeyButtonRipple.java b/packages/SystemUI/src/com/android/systemui/statusbar/policy/KeyButtonRipple.java
index 7c12811..863a907 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/policy/KeyButtonRipple.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/policy/KeyButtonRipple.java
@@ -66,16 +66,19 @@ public class KeyButtonRipple extends Drawable {
     private final HashSet<Animator> mRunningAnimations = new HashSet<>();
     private final ArrayList<Animator> mTmpArray = new ArrayList<>();
 
+    private int mRippleColor;
+
     public KeyButtonRipple(Context ctx, View targetView) {
         mMaxWidth =  ctx.getResources().getDimensionPixelSize(R.dimen.key_button_ripple_max_width);
         mTargetView = targetView;
+        mRippleColor = ctx.getResources().getColor(R.color.navbutton_ripple_color);
     }
 
     private Paint getRipplePaint() {
         if (mRipplePaint == null) {
             mRipplePaint = new Paint();
             mRipplePaint.setAntiAlias(true);
-            mRipplePaint.setColor(0xffffffff);
+            mRipplePaint.setColor(mRippleColor);
         }
         return mRipplePaint;
     }
-- 
1.7.9.5

